---
import BaseLayout from "../layouts/BaseLayout.astro";

const params = new URL(Astro.request.url).searchParams;
const error = params.get("error");
const sent = params.get("sent");
---

<BaseLayout title="Forgot Password - Rubbish Publishing Group">
	<div class="auth-page">
		<div class="auth-card">
			<h1>Forgot Password</h1>
			<p class="auth-subtitle">Enter your account email and we will send a reset link.</p>

			{sent && (
				<div class="alert alert-success">If the email exists, a password reset link has been sent.</div>
			)}
			{error && (
				<div class="alert alert-error">
					{error === "invalid_email" ? "Please enter a valid email address." : "Unable to process your request."}
				</div>
			)}

			<form action="/api/auth/forgot-password" method="post">
				<div class="form-group">
					<label class="form-label" for="email">Email Address</label>
					<input id="email" name="email" type="email" class="form-input" required autocomplete="email" placeholder="your@email.com" />
				</div>
				<button type="submit" class="btn btn-primary btn-full btn-lg">Send Reset Link</button>
			</form>

			<p style="text-align:center; margin-top:1rem;"><a href="/login">Back to Sign In</a></p>
		</div>
	</div>
</BaseLayout>
